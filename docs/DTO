
======================================================================
ISFCE ‚Äì PROJET DISPENSES 25‚Äì26
DOCUMENT : EXPLICATION DES RECORDS DTO
======================================================================

üåç L‚Äôid√©e g√©n√©rale
----------------------------------------------------------------------
Ce fichier contient trois petits objets ‚ÄúDTO‚Äù (Data Transfer Object) qui servent uniquement √† recevoir ou envoyer des donn√©es entre ton API REST et ton front-end (ou Postman).

Ces objets ne repr√©sentent pas le m√©tier (pas d‚ÄôID, pas de liens vers la base, pas d‚Äôannotations JPA). 
Ils servent juste √† transporter des donn√©es temporaires :
- quand un √©tudiant cr√©e une demande,
- ajoute un cours externe,
- ajoute un document.

Et ici, chacun de ces objets est d√©fini avec le mot-cl√© record.

----------------------------------------------------------------------
‚öôÔ∏è Qu‚Äôest-ce qu‚Äôun record (et pourquoi on l‚Äôutilise ici)
----------------------------------------------------------------------
Un record est une forme sp√©ciale de classe Java apparue √† partir de Java 16, con√ßue pour repr√©senter des donn√©es immuables (non modifiables apr√®s cr√©ation).

C‚Äôest donc une classe simplifi√©e, id√©ale pour les DTO.

Exemple :
public record AddCourseDTO(String etablissement, String code, String libelle, int ects, String urlProgramme) { }

√âquivalent √† une classe compl√®te :
public final class AddCourseDTO {
    private final String etablissement;
    private final String code;
    private final String libelle;
    private final int ects;
    private final String urlProgramme;
    public AddCourseDTO(String etablissement, String code, String libelle, int ects, String urlProgramme) {
        this.etablissement = etablissement;
        this.code = code;
        this.libelle = libelle;
        this.ects = ects;
        this.urlProgramme = urlProgramme;
    }
    public String etablissement() { return etablissement; }
    public String code() { return code; }
    public String libelle() { return libelle; }
    public int ects() { return ects; }
    public String urlProgramme() { return urlProgramme; }
}

Autrement dit, un record :
- cr√©e automatiquement les getters, le constructeur, le toString, equals, hashCode, etc.
- rend les champs immuables (final).
- est parfait pour les objets simples qui transportent des donn√©es sans logique m√©tier.

----------------------------------------------------------------------
üí¨ Donc : classe ou record ?
----------------------------------------------------------------------
| Type | Quand l‚Äôutiliser | Exemple |
|------|------------------|----------|
| class | Quand ton objet a de la logique, des m√©thodes, ou des valeurs qui peuvent changer | Domain, Services, Entit√©s JPA |
| record | Quand ton objet est juste un conteneur de donn√©es immuables, comme un DTO ou un param√®tre d‚ÄôAPI | DTO, r√©ponse JSON |

Ici, c‚Äôest exactement le cas d‚Äôun DTO ‚Üí donc record = parfait choix.

----------------------------------------------------------------------
üîç Ligne par ligne (explication des 3 records)
----------------------------------------------------------------------

1Ô∏è‚É£ CreateRequestDTO
----------------------------------------------------------------------
public record CreateRequestDTO(@NotBlank String section) { }

R√¥le :
C‚Äôest l‚Äôobjet qu‚Äôun √©tudiant envoie quand il cr√©e une nouvelle demande de dispense.

Contenu :
| Champ   | Type   | Validation  | R√¥le                                                       |
|---------|--------|-------------|------------------------------------------------------------|
| section | String | @NotBlank   | La section de l‚Äô√©tudiant (ex : ‚ÄúInformatique‚Äù, ‚ÄúGestion‚Äù). |

Exemple JSON :
{
  "section": "Informatique"
}

----------------------------------------------------------------------
2Ô∏è‚É£ AddCourseDTO
----------------------------------------------------------------------
public record AddCourseDTO(
        @NotBlank String etablissement,
        @NotBlank String code,
        @NotBlank String libelle,
        @Min(1) int ects,
        String urlProgramme
) { }

R√¥le :
Repr√©sente les informations d‚Äôun cours externe que l‚Äô√©tudiant ajoute √† sa demande de dispense.

Contenu :
| Champ         | Type   | Validation | R√¥le                                          |
|---------------|--------|------------|-----------------------------------------------|
| etablissement | String | @NotBlank  | Le nom de l‚Äô√©cole d‚Äôorigine (ex : ULB, HE2B). |
| code          | String | @NotBlank  | Le code du cours externe (ex : BD101).        |
| libelle       | String | @NotBlank  | Le nom complet du cours.                      |
| ects          | int    | @Min(1)    | Nombre de cr√©dits ECTS (minimum 1).           |
| urlProgramme  | String | optionnel  | Lien vers la fiche ou le syllabus.            |

Exemple JSON :
{
  "etablissement": "HE2B",
  "code": "BD101",
  "libelle": "Bases de donn√©es",
  "ects": 5,
  "urlProgramme": "https://he2b.be/programmes/bd101.pdf"
}

----------------------------------------------------------------------
3Ô∏è‚É£ AddDocumentDTO
----------------------------------------------------------------------
public record AddDocumentDTO(
        @NotBlank String type, // BULLETIN/PROGRAMME/MOTIVATION/AUTRE
        @NotBlank String url
) { }

R√¥le :
Repr√©sente un document joint par l‚Äô√©tudiant √† sa demande.

Contenu :
| Champ | Type | Validation | R√¥le |
|--------|------|-------------|------|
| type | String | @NotBlank | Le type de document (ex : ‚ÄúBULLETIN‚Äù, ‚ÄúPROGRAMME‚Äù). |
| url | String | @NotBlank | Lien ou chemin du fichier (souvent un PDF). |

Exemple JSON :
{
  "type": "BULLETIN",
  "url": "https://monserveur/uploads/bulletin123.pdf"
}

----------------------------------------------------------------------
üß† Pourquoi les @NotBlank et @Min ?
----------------------------------------------------------------------
Ces annotations de Jakarta Validation servent √† v√©rifier automatiquement les donn√©es re√ßues.

| Annotation | Signification | Exemple |
|-------------|----------------|----------|
| @NotBlank | le champ ne doit pas √™tre vide ou null | "code": "" ‚Üí rejet√© |
| @Min(1) | valeur num√©rique minimale | "ects": 0 ‚Üí rejet√© |

Spring v√©rifie ces contraintes avant m√™me que ton contr√¥leur ex√©cute la logique.
Si une donn√©e est invalide, Spring renvoie automatiquement une erreur 400 (Bad Request).

----------------------------------------------------------------------
üß© En r√©sum√©
----------------------------------------------------------------------
| DTO              | Sert √†‚Ä¶                    | Donn√©es re√ßues                          | Exemple JSON                                                                           |
|------------------|----------------------------|-----------------------------------------|----------------------------------------------------------------------------------------|
| CreateRequestDTO | Cr√©er une nouvelle demande | Section                                 | { "section": "Informatique" }                                                          |
| AddCourseDTO     | Ajouter un cours externe   | √âtablissement, code, libell√©, ects, url | { "etablissement": "HE2B", "code": "BD101", "libelle": "Bases de donn√©es", "ects": 5 } |
| AddDocumentDTO   | Ajouter un document        | Type, url                               | { "type": "BULLETIN", "url": "..." }                                                   |

----------------------------------------------------------------------
‚úÖ En r√©sum√© simple
----------------------------------------------------------------------
- Un record, c‚Äôest comme une mini-classe fig√©e : parfait pour transporter des donn√©es d‚Äôentr√©e/sortie.
- Ces trois records (CreateRequestDTO, AddCourseDTO, AddDocumentDTO) servent √† transf√©rer les donn√©es de l‚Äôinterface utilisateur vers ton API.
- Ils ne sont pas li√©s √† la base de donn√©es : juste des paquets de donn√©es temporaires.
- Le choix du record ici est parfaitement adapt√© : concis, s√ªr, et sans logique m√©tier.

======================================================================
FIN DU DOCUMENT ‚Äì √Ä COLLER DANS WORD ET METTRE LA POLICE √Ä 8 PT
======================================================================
